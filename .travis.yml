language: java

jdk:
- oraclejdk8

install:
- mvn -N io.takari:maven:wrapper -Dmaven=3.5.0

script:
- "./mvnw clean install"

after_success:
- "./mvnw jacoco:report coveralls:report"
  skip_cleanup: true

deploy:
- provider: script
  skip_cleanup: true
  script: releng/publish.sh releng/net.reimone.sourceanalysator.product/target/products/SourceAnalysator-win32.win32.x86.zip RCP-32bit
  on:
    tags: true

env:
  global:
  - BINTRAY_USER: jreimone
  - BINTRAY_OWNER: jreimone
  - BINTRAY_REPO: source-analysator
  # BINTRAY_API_KEY
  - secure: DqlrAa0+8KZvHlY7TzcYWrynhBVmtDojTHlK0n7ltC4FpNeIDMxqicgAo7x0vzqibovZfKkzGvwFEHGQaVl4SnNz4iVM9y+8CBIwnzZ7Q50dGumYaFAaXwSRMEGbUeLGB/0jmfzfyxwR9C1S5OAD9yLA30Q6mqa45npwHdZ/ialw3bz7bLRQA+EkEv3bT04WORaJ46/V1fIkIEB7CC4gnKhk9wN5sz+9Ku7arWJIl6mI0j12cDinukGr3enSPdc1wDaFbE65WYmzRn0TE0nJeZym0KtGV+JepxeyVNtT2yOGB9eq2Qch4qulzqRKynr4u56doqT9cXoQ1y+4OXTvP+J5+L+AeW/ueZFEb8wTKaEi7Cjz2GH/V1ILo/PEw2JXtf4A6IZtuFSJ38mC3XIwCaDOvKKtC6d2OWQZqSj4z1kev86gvvAN5iWi1ds3lzJkUuKhRiCaWem4QUbdasNC5d/imY4AX3fvl85eg+D1lBzYr7WWwTjMQTgaTtQzoQ4QBxP5Y0Q05G3dlxuS6hfow89oN61lWWvhqd3L2sgUcmk57IAoe2erzLpw5LrRG/WUEWX3/lq0A86Zm0IWJmwd2YoZrrDB059Bsh13umYPOlFhiBXcqYKjSAjzxMJFyMN5LXNQqL3M0xNMsMCphCH/Jr47eMFQpJ7JSjk9qWqLxl0=
